<div class="banner" style="background-image: linear-gradient(rgba(0,0,0,0.4),rgba(0,0,0,0.4)), url(<%= @lesson.skill_picture %>);">
<div class="container">
    <h1><%= @lesson.skill_name %></h1>
  </div>
</div>

<div class ="container">
  <% if current_user.status == "Padawan" %>
    <h1><%= @lesson.skill_name %></h1>
      <% if @lesson.user.status == "Jedi" %>
      <h3 class=mt-3>Taught by: <%= @lesson.user.name %>, <%= @lesson.user.side %> side</h3>
      <% end %>
      <p>
        <%= @lesson.description %>
      </p>
      <div class="flex">
        <p>Price: <%= @lesson.price %> Imperial Credits</p>
        <p>Starting time: <%= @lesson.start_at %></p>
        <p>Ending time: <%= @lesson.end_at %></p>
        <%= link_to "Return", lessons_path, class: "btn btn-primary"  %>
        <% if policy(Booking).create? %>
          <%= link_to "Book now!", lesson_bookings_path(lesson_id: @lesson.id), method: "post", class: "btn btn-primary" %>
        <%  end %>
  <% elsif current_user.status == "Jedi" %>
    <div class="booking-actions">
      <h1><%= @lesson.skill_name %></h1>
       <%= @lesson.description %>
      <% @lesson.bookings.each do |booking| %>
       <%= booking  %>
        <% if booking.pending? %>
          <%= simple_form_for booking do |f| %>
          <% if policy(Booking).update? %>
            <%= f.input :status, as: :hidden, input_html: { value: 'confirmed'} %>
            <%= f.submit 'Confirmed', method: :patch, class: 'btn btn-primary' %>
          <% end %>
        <% end %>
        <%= simple_form_for booking do |f| %>
          <% if policy(Booking).update? %>
            <%= f.input :status, as: :hidden, input_html: { value: 'denied'} %>
            <%= f.submit 'Denied', method: :patch, class: 'btn btn-primary' %>
         <% end %>
        <% end %>
        <% else %>
          <p class='booking-tag'><%= booking.status %></p>
        <% end %>
      <% end %>
    </div>
  <% end %>
</div>
</div>


<%# # details for lesson
# description, start time, teacher, avalible, time, price, skill name
# booking option and return option   %>
